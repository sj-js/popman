function t(){var t=this;this.popMap={},this.darkList=[],this.focusDarkMap={},this.divCamSizeChecker,window.addEventListener("resize",function(e){for(var n in t.popMap)t.isOn(n)&&t.adjustPossition(n)})}window.getNewEl=function(t,e,n,o,i,r,s){var a=document.createElement(t);e&&(a.id=e),n&&a.setAttribute("class",n);for(var l in o)a.setAttribute(l,o[l]);return i&&(a.innerHTML=i),r&&getEl(a).addEventListener(r,function(t){s(t)}),a},window.getEl=function(t){var e="object"==typeof t?t:document.getElementById(t);return this.obj=e,this.attr=function(t,n){return n?(e.setAttribute(t,n),this):e.getAttribute(t)},this.clas=function(){var t={has:function(t){return e.className.indexOf(t)!=-1},add:function(n){return e.classList?e.classList.add(n):e.className+=" "+n+" ",t},remove:function(n){if(e.classList)e.classList.remove(n);else{for(var o=e.className.split(" ");o.indexOf(n)!=-1;)o.splice(o.indexOf(n),1);e.className=o.join(" ")}return t}};return t}(),this.findEl=function(t,n){for(var o=e.children,i=0;i<o.length;i++)if(o[i].getAttribute(t)==n)return o[i]},this.findParentEl=function(t,n){for(var o,i=e;i;){if(i==document.body.parentNode){o=null;break}if(i.getAttribute(t)==n){o=i;break}i=i.parentNode}return o},this.add=function(t){return"object"==typeof t?e.appendChild(t):e.innerHTML+=t,this},this.addln=function(t){return"object"==typeof t?e.appendChild(t):e.innerHTML+=t?t:"",e.appendChild(document.createElement("br")),this},this.hasEventListener=function(t){return e.hasEventListener(t)},this.removeEventListener=function(t,n){return e.removeEventListener(t,n),this},this.addEventListener=function(t,n){navigator.userAgent.indexOf("Firefox")!=-1&&e.addEventListener(t,function(t){window.event=t},!0),e.addEventListener?e.addEventListener(t,function(t){n(t)}):e.attachEvent("on"+t,function(t){!t.target&&t.srcElement&&(t.target=t.srcElement),n(t)})},this.del=function(t){return e.removeChild(t),this},this.html=function(t){return e.innerHTML=t,this},this.clear=function(){return e.innerHTML="",this},this.scrollDown=function(){return e.scrollTop=e.scrollHeight,this},this.disableSelection=function(){return"undefined"!=typeof e.ondragstart&&(e.ondragstart=function(){return!1}),"undefined"!=typeof e.onselectstart&&(e.onselectstart=function(){return!1}),"undefined"!=typeof e.oncontextmenu&&(e.oncontextmenu=function(){return!1}),"undefined"!=typeof e.style.MozUserSelect&&(document.body.style.MozUserSelect="none"),this},this.hideDiv=function(){return e.style.display="block",e.style.position="absolute",e.style.left="-5555px",e.style.top="-5555px",this},this.showDiv=function(){return e.style.display="block",e.style.position="absolute",e.style.left="0px",e.style.top="0px",this},this.getNewSeqId=function(t){for(var n=1;n<5e4;n++){var o=t+n;if(!(o in e))return o}return null},this.getParentEl=function(t){for(var n=e;n&&void 0==n.getAttribute(t);)n=n.parentNode;return n},this},function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var o=(new Date).getTime(),i=Math.max(0,16-(o-t)),r=window.setTimeout(function(){e(o+i)},i);return t=o+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){window.URL=window.URL||window.webkitURL,window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder}(),function(){navigator.userAgent.indexOf("Firefox")!=-1&&window.addEventListener(eventNm,function(t){window.event=t},!0),!window.addEventListener&&window.attachEvent&&(window.addEventListener=function(t,e){window.attachEvent("on"+t,function(t){!t.target&&t.srcElement&&(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){}),t.stopPropagation||(t.stopPropagation=function(){t.returnValue=!1,t.cancelBubble=!0}),e(t)})})}(),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1})}(),function(){document.querySelectorAll||document.getElementsByTagName&&(document.querySelectorAll=function(){var t,e=selector.indexOf("["),n=selector.indexOf("]"),o=[];if(e!=-1&&n!=-1){t=selector.substring(e+1,n);for(var i=["div","span","form","input","select","textarea"],r=0;r<i.length;r++)for(var s=document.getElementsByTagName(i[r]),a=0;a<s.length;a++)void 0!=s[a].getAttribute(t)&&o.push(s[a])}return o})}(),t.prototype.add=function(t){var e=100,n=document.createElement("div");n.style.display="inline-block",n.style.background="white",n.style.width=t.width?t.width:0,n.style.height=t.height?t.height:0,n.style.zIndex=e,getEl(n).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation()}),this.popMap[t.name]=t,this.popMap[t.name].popEl=n,this.popMap[t.name].darkEl=null,this.popMap[t.name].isPoped=!1,getEl(n).hideDiv(),getEl(document.body).add(n);var o=t.add;return"function"==typeof o?t.add(t):"object"==typeof o&&n.appendChild(o),this},t.prototype.isOn=function(t){var e=this.popMap[t];return e&&e.isPoped},t.prototype.toggle=function(t){this.isOn(t)?this.close(t):this.pop(t)},t.prototype.pop=function(t,e){var n=this.popMap[t];n.isPoped||(n.pop&&n.pop(n),n.noDark?getEl(document.body).add(n.popEl):(n.darkEl=this.spreadDark(n),getEl(n.darkEl).add(n.popEl)),this.adjustPossition(t),n.isPoped=!0,e&&e())},t.prototype.close=function(t,e){var n=this.popMap[t];n.isPoped&&(n.close&&n.close(n),getEl(n.popEl.parentNode).del(n.popEl),n.noDark||this.closeDark(n.darkEl),n.isPoped=!1,e&&e())},t.prototype.focusOn=function(t){if(!this.focusDarkMap.up&&t){var e=t.getBoundingClientRect?t.getBoundingClientRect():this.getBodyOffset(t),n=t.ownerDocument,o=n.defaultView||n.parentWindow,i=this.getFrameOffset(o),r=e.left+i.left,s=e.top+i.top,a=t.offsetWidth,l=t.offsetHeight;if(0==a)return!1;var d=this.getDivCamSizeChecker().offsetWidth,p=this.getDivCamSizeChecker().offsetHeight;this.focusDarkMap={up:this.getDarkEl(0,0,d,s),down:this.getDarkEl(0,s+l,d,p),left:this.getDarkEl(0,s,r,s+l),right:this.getDarkEl(r+a,s,d,s+l),arrow:this.getArrow(r-30,s-9,">>>")};for(var u in this.focusDarkMap){var f=this.focusDarkMap[u];getEl(document.body).add(f),window.getComputedStyle(f).background,"arrow"!=u&&this.setBackgroundColor(f,"rgba(0,0,0,.7)")}return!0}},t.prototype.focusOff=function(){for(var t in this.focusDarkMap){var e=this.focusDarkMap[t];getEl(e.parentNode).del(e),delete this.focusDarkMap[t]}},t.prototype.getDivCamSizeChecker=function(){if(!this.divCamSizeChecker){var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.left="-7777px",t.style.top="-7777px",document.body.appendChild(t),this.divCamSizeChecker=t}return this.divCamSizeChecker},t.prototype.spreadDark=function(t){var e=this,n=100,o="rgba(0,0,0,.7)",i=document.createElement("div");this.darkList.push(i),t.easyclose&&getEl(i).addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.close(t.name)}),getEl(i).showDiv(),getEl(document.body).add(i),i.style.width="100%",i.style.height="100%",i.style.zIndex=n;try{i.style.background=o}catch(r){if(o.indexOf("rgba")!=-1){o=o.replace("rgba","rgb");var s=o.lastIndexOf(",");o=o.substring(0,s)+")"}i.style.background=o}return i},t.prototype.adjustPossition=function(t,e){function n(t,e){var n=(t+"").length,o=(parseFloat(t)+"").length;return o==n?result=t+e:result=t,result}var o=this.popMap[t],i=o.popEl,r=i.parentNode.offsetWidth,s=i.parentNode.offsetHeight;s=0==s?this.getDivCamSizeChecker().offsetHeight:s,i.style.position="absolute";var a=this.getSolvedPopExpMap(r,o.expx),l=this.getSolvedPopExpMap(s,o.expy);i.style.left=n(a.pos,"px"),i.style.top=n(l.pos,"px"),i.style.width=n(a.size,"px"),i.style.height=n(l.size,"px")},t.prototype.getSolvedPopExpMap=function(t,e){var n,o,i,r,s,a,l,d,p,u=this.getSize;if(e){var f=e.indexOf("("),c=e.indexOf(")");p=f!=-1&&c!=-1,p?(o=e.substring(0,f),r=e.substring(c+1,e.length),i=e.substring(f+1,c)):(o="*",i=e,r="*"),s=u(t,o),a=u(t,i),l=u(t,r),"*"==i&&(a=t-s-l),d="*"==o&&"*"!=r?t-a-l:"*"!=o&&"*"==r?0:"*"==o&&"*"==r?(t-a)/2:s,n={isPopExp:p,expStart:o,expEnd:r,expSize:i,pos:d,size:a}}return n},t.prototype.getSize=function(t,e){return"undefined"==typeof e?0:(e+"").indexOf("%")!=-1?t*(parseFloat(e)/100):(e+"").indexOf("*")!=-1?0:e},t.prototype.closeDark=function(t){for(var e=this.darkList,n=0;n<e.length;n++)e[n]==t&&(e.splice(n,1),getEl(t.parentNode).del(t))},t.prototype.getDarkEl=function(t,e,n,o){function i(t){return t>=0?t:0}var r=50,s=document.createElement("div"),a="px";return s.style.left=t+a,s.style.top=e+a,s.style.width=i(n-t)+a,s.style.height=i(o-e)+a,s.style.zIndex=r,s.style.display="block",s.style.position="absolute",s.style.transition="background-color .5s, transform .5s",this.setBackgroundColor(s,"rgba(255,255,255,0)"),s},t.prototype.getArrow=function(t,e,n){var o=51,i=document.createElement("div"),r="px";return i.style.left=t+r,i.style.top=e+r,i.style.width="30px",i.style.height="30px",i.style.zIndex=o,i.style.display="block",i.style.position="absolute",i.style.transition="background-color .5s, transform .5s",i.style.color="white",i.innerHTML=n,i},t.prototype.getBodyOffset=function(t){for(var e=0,n=0,o=t,i=t.parentNode;i;){var r=0,s=0;if(o!=document.body&&(r=o.scrollLeft,s=o.scrollTop),!i.style)break;if("absolute"==i.style.position)e+=o.offsetLeft-r,n+=o.offsetTop-s;else{if("fixed"==i.style.position||"fixed"==o.style.position){e+=o.offsetLeft+sjHelper.cross.getBodyScrollX(),n+=o.offsetTop+sjHelper.cross.getBodyScrollY();break}e+=o.offsetLeft-i.offsetLeft-r,n+=o.offsetTop-i.offsetTop-s}o=i,i=i.parentNode}var a={left:e,top:n,width:t.offsetWidth,height:t.offsetHeight};return a},t.prototype.getFrameOffset=function(t,e){if(e="undefined"==typeof e?{top:0,left:0}:e,t!==top){var n=t.frameElement.getBoundingClientRect();e.left+=n.left,e.top+=n.top,e=this.getFrameOffset(t.parent,e)}return e},t.prototype.setBackgroundColor=function(t,e){try{t.style.background=e}catch(n){if(e.indexOf("rgba")!=-1){e=e.replace("rgba","rgb");var o=e.lastIndexOf(",");e=e.substring(0,o)+")"}t.style.background=e}};